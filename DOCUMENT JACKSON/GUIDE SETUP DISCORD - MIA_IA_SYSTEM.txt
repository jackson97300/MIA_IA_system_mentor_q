
# üöÄ GUIDE SETUP DISCORD - MIA_IA_SYSTEM

## üìã **√âTAPES POUR RENDRE DISCORD FONCTIONNEL**

### **OPTION A : Webhook Discord (RECOMMAND√âE - Plus Simple)**

#### **1. Cr√©er Webhook Discord**
1. Ouvrir Discord ‚Üí Aller sur ton serveur
2. Clic droit sur le canal voulu ‚Üí **Param√®tres**
3. **Int√©grations** ‚Üí **Webhooks** ‚Üí **Cr√©er un webhook**
4. Copier l'URL du webhook
5. Coller dans `automation_params.json` :

```json
"discord_integration": {
  "enabled": true,
  "webhook_url": "https://discord.com/api/webhooks/1234567890/ABCDEF-TOKEN-ICI"
}
```

#### **2. Tester le Webhook**
```python
# Test rapide
import requests

webhook_url = "TON_WEBHOOK_URL"
payload = {
    "username": "MIA_IA_SYSTEM",
    "content": "üöÄ Test connexion Discord !",
    "embeds": [{
        "title": "Syst√®me de Trading",
        "description": "Discord configur√© avec succ√®s",
        "color": 0x00ff00
    }]
}

response = requests.post(webhook_url, json=payload)
print(f"Status: {response.status_code}")  # Doit √™tre 204
```

---

### **OPTION B : Bot Discord (Plus Avanc√©)**

#### **1. Cr√©er Application Discord**
1. Aller sur https://discord.com/developers/applications
2. **New Application** ‚Üí Nommer "MIA_IA_SYSTEM"
3. **Bot** ‚Üí **Add Bot** ‚Üí **Yes, do it!**
4. Copier le **Token** (garder secret !)

#### **2. Inviter Bot sur Serveur**
1. **OAuth2** ‚Üí **URL Generator**
2. **Scopes** : `bot`
3. **Bot Permissions** : 
   - Send Messages
   - Embed Links
   - Read Message History
4. Copier URL g√©n√©r√©e ‚Üí Ouvrir dans navigateur
5. S√©lectionner serveur ‚Üí **Autoriser**

#### **3. Obtenir IDs des Canaux**
1. Discord ‚Üí **Param√®tres Utilisateur** ‚Üí **Avanc√©** ‚Üí **Mode D√©veloppeur** ON
2. Clic droit sur chaque canal ‚Üí **Copier l'identifiant**
3. Noter les IDs (nombres longs)

---

## üîß **CONFIGURATION automation_params.json**

### **Configuration Webhook Simple**
```json
"notifications": {
  "discord_integration": {
    "enabled": true,
    "webhook_url": "https://discord.com/api/webhooks/TON_ID/TON_TOKEN",
    "notification_types": [
      "trade_executions",
      "system_alerts",
      "daily_summary"
    ]
  }
}
```

### **Configuration Bot Compl√®te**
```json
"notifications": {
  "discord_integration": {
    "enabled": true,
    "webhook_url": "https://discord.com/api/webhooks/ID/TOKEN",
    "bot_token": "BOT_TOKEN_ICI",
    "channels": {
      "main_channel_id": "123456789012345678",
      "alerts_channel_id": "234567890123456789",
      "trades_channel_id": "345678901234567890"
    }
  }
}
```

---

## üß™ **TESTER LE SYST√àME**

### **1. Test Simple**
```python
# Dans le dossier du projet
python -c "
import json
from monitoring.alert_system import AlertSystem

# Charger config
with open('automation_params.json') as f:
    config = json.load(f)

# Cr√©er syst√®me d'alertes
alert_system = AlertSystem()

# Test notification Discord
alert_system.send_test_notification('Discord configur√© !')
"
```

### **2. Test Complet**
```python
# Script de test complet
from monitoring.discord_notifier import DiscordNotifier
from monitoring.alert_system import AlertSystem, Alert, AlertLevel

# Test Discord
notifier = DiscordNotifier()
success = notifier.send_notification(
    "üöÄ MIA_IA_SYSTEM Discord Test",
    urgent=True
)
print(f"Discord test: {'‚úÖ OK' if success else '‚ùå FAIL'}")

# Test alerte syst√®me
alert_system = AlertSystem()
test_alert = Alert(
    alert_id="test_001",
    level=AlertLevel.INFO,
    title="Test Discord",
    message="Configuration Discord r√©ussie !",
    current_value=100.0,
    threshold_value=90.0,
    source="test_system"
)
alert_system.process_alert(test_alert)
```

---

## üîç **D√âPANNAGE**

### **Erreurs Communes**

#### **Webhook ne fonctionne pas**
- V√©rifier URL copi√©e compl√®tement
- Tester avec curl :
```bash
curl -X POST "TON_WEBHOOK_URL" \
  -H "Content-Type: application/json" \
  -d '{"content":"Test"}'
```

#### **Bot ne r√©pond pas**
- V√©rifier token valide
- Bot invit√© sur serveur ?
- Permissions suffisantes ?

#### **Canal introuvable**
- Mode d√©veloppeur activ√© ?
- ID copi√© correctement ?
- Bot a acc√®s au canal ?

### **Logs de Debug**
```python
import logging
logging.basicConfig(level=logging.DEBUG)

# Relancer le test avec logs d√©taill√©s
```

---

## üéØ **R√âSULTAT ATTENDU**

Apr√®s configuration, tu recevras dans Discord :

### **Messages d'Alertes**
- üü¢ **INFO** : Confirmations, d√©marrages
- üü† **WARNING** : Surveillance renforc√©e
- üî¥ **CRITICAL** : Action imm√©diate requise
- üö® **EMERGENCY** : Arr√™t syst√®me

### **Messages de Trading**
- üìà Ex√©cutions d'ordres
- üí∞ P&L en temps r√©el
- üìä R√©sum√©s journaliers
- ‚ö†Ô∏è Alertes de risque

### **Format des Messages**
```
üöÄ MIA_IA_SYSTEM

üî¥ CRITICAL: Position Risk Alert
Valeur Actuelle: 1250.50
Seuil: 1200.00
Source: risk_manager

Timestamp: 2025-01-24 14:30:15
```

---

## ‚úÖ **CHECKLIST FINALE**

- [ ] Webhook Discord cr√©√© et URL copi√©e
- [ ] URL ajout√©e dans `automation_params.json`
- [ ] `"enabled": true` dans la config
- [ ] Test de connexion r√©ussi
- [ ] Message test re√ßu dans Discord
- [ ] Syst√®me d'alertes fonctionnel

**üèÜ Une fois ces √©tapes compl√©t√©es, Discord sera pleinement op√©rationnel avec MIA_IA_SYSTEM !**