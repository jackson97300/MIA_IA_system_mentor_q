#!/usr/bin/env python3
"""
SCRIPT DE RÃ‰CUPÃ‰RATION D'EFFICACITÃ‰
Mise Ã  jour ML Ensemble Filter : Version Minimale â†’ Version Elite OptimisÃ©e

ğŸ¯ OBJECTIF: RÃ©cupÃ©rer +1-2% win rate perdu
âš¡ ACTION: Remplacement version simplifiÃ©e par version complÃ¨te
"""

import sys
import os
from pathlib import Path

# Ajout du rÃ©pertoire racine au path
sys.path.insert(0, str(Path(__file__).parent))

from core.logger import get_logger

logger = get_logger(__name__)

def main():
    """Script principal de mise Ã  jour"""
    logger.info("ğŸš€ === RÃ‰CUPÃ‰RATION EFFICACITÃ‰ ML ENSEMBLE ===")
    logger.info("ğŸ“‹ Passage version minimale â†’ version Elite optimisÃ©e")
    
    try:
        # 1. Import du nouveau ML Ensemble optimisÃ©
        from ml.ensemble_filter import upgrade_from_minimal_version
        
        # 2. ExÃ©cution mise Ã  jour
        success = upgrade_from_minimal_version()
        
        if success:
            logger.info("ğŸ† === MISE Ã€ JOUR RÃ‰USSIE ===")
            logger.info("âœ… ML Ensemble Filter optimisÃ© installÃ©")
            logger.info("ğŸ’ EfficacitÃ© +1-2% win rate rÃ©cupÃ©rÃ©e")
            logger.info("ğŸ¯ TECHNIQUE #3 ELITE maintenant active")
            logger.info("")
            logger.info("ğŸ“‹ PROCHAINES Ã‰TAPES:")
            logger.info("1. Testez avec: python test_ml_ensemble_complete.py")
            logger.info("2. IntÃ©grez dans signal_generator.py")
            logger.info("3. Lancez backtesting pour valider performance")
            logger.info("4. DÃ©ployez en live avec monitoring")
        else:
            logger.error("âŒ Ã‰CHEC MISE Ã€ JOUR")
            logger.error("ğŸ”§ VÃ©rifiez les logs ci-dessus pour diagnostiquer")
            return 1
            
    except ImportError as e:
        logger.error(f"âŒ Import error: {e}")
        logger.error("ğŸ”§ VÃ©rifiez que ensemble_filter.py est correctement mis Ã  jour")
        return 1
    
    except Exception as e:
        logger.error(f"âŒ Erreur inattendue: {e}")
        return 1
    
    return 0

if __name__ == "__main__":
    exit_code = main()
    sys.exit(exit_code)