{
  "config_info": {
    "version": "3.2.1",
    "last_updated": "2025-01-24",
    "description": "Paramètres de gestion des risques MIA_IA_SYSTEM - Sécurité maximale"
  },
  
  "position_sizing": {
    "base_position_size": 1,
    "max_position_size": 2,
    "max_positions_concurrent": 2,
    "position_sizing_method": "fixed",
    "dynamic_sizing": {
      "enabled": false,
      "confidence_based": {
        "high_confidence_multiplier": 1.5,
        "low_confidence_multiplier": 0.5,
        "confidence_threshold": 0.75
      },
      "volatility_based": {
        "enabled": false,
        "high_volatility_reducer": 0.7,
        "low_volatility_enhancer": 1.2
      }
    }
  },
  
  "stop_loss": {
    "default_stop_ticks": 10,
    "stop_strategies": {
      "fixed": {
        "enabled": true,
        "stop_distance_ticks": 10,
        "description": "Stop fixe à 10 ticks (40$ pour ES)"
      },
      "atr_based": {
        "enabled": false,
        "atr_multiplier": 1.5,
        "min_stop_ticks": 6,
        "max_stop_ticks": 20
      },
      "pattern_based": {
        "enabled": true,
        "battle_navale_stop": 8,
        "gamma_pin_stop": 6,
        "confluence_stop": 12,
        "description": "Stops adaptés au pattern détecté"
      }
    },
    "trailing_stop": {
      "enabled": false,
      "initial_distance_ticks": 15,
      "trail_amount_ticks": 2,
      "min_profit_before_trail": 8
    }
  },
  
  "daily_limits": {
    "max_daily_loss": 500.0,
    "max_daily_trades": 25,
    "max_consecutive_losses": 4,
    "daily_profit_target": 300.0,
    "stop_trading_on_target": false,
    "cool_down_periods": {
      "after_max_loss": 24,
      "after_consecutive_losses": 2,
      "after_daily_target": 0
    }
  },
  
  "drawdown_protection": {
    "max_account_drawdown": 0.15,
    "max_daily_drawdown": 0.05,
    "drawdown_calculation_method": "peak_to_valley",
    "emergency_stop_triggers": {
      "enabled": true,
      "drawdown_threshold": 0.10,
      "consecutive_loss_amount": 300.0,
      "system_error_count": 3
    }
  },
  
  "account_protection": {
    "min_account_balance": 25000.0,
    "max_risk_per_trade": 0.01,
    "max_portfolio_risk": 0.03,
    "margin_requirements": {
      "initial_margin_buffer": 1.5,
      "maintenance_margin_alert": 1.2,
      "forced_liquidation_threshold": 1.1
    }
  },
  
  "time_based_risk": {
    "session_limits": {
      "pre_market": {
        "enabled": false,
        "max_trades": 0,
        "max_risk": 0.0
      },
      "market_open": {
        "enabled": true,
        "max_trades": 5,
        "max_risk": 200.0,
        "time_window": "09:30-10:30"
      },
      "mid_session": {
        "enabled": true,
        "max_trades": 15,
        "max_risk": 400.0,
        "time_window": "10:30-15:30"
      },
      "market_close": {
        "enabled": true,
        "max_trades": 3,
        "max_risk": 100.0,
        "time_window": "15:30-16:00"
      }
    },
    "week_end_protection": {
      "friday_cutoff": "15:00",
      "max_weekend_exposure": 0,
      "force_close_positions": true
    }
  },
  
  "market_condition_risk": {
    "high_volatility": {
      "vix_threshold": 25.0,
      "position_size_reduction": 0.5,
      "stop_distance_increase": 1.5,
      "max_trades_reduction": 0.7
    },
    "low_liquidity": {
      "volume_threshold_multiplier": 0.5,
      "spread_threshold_ticks": 3,
      "avoid_trading": true
    },
    "news_events": {
      "fomc_protection": {
        "enabled": true,
        "blackout_minutes_before": 30,
        "blackout_minutes_after": 60
      },
      "economic_data": {
        "enabled": true,
        "high_impact_blackout": 15,
        "medium_impact_blackout": 5
      }
    }
  },
  
  "pattern_specific_risk": {
    "battle_navale": {
      "max_daily_signals": 15,
      "min_base_quality": 0.60,
      "required_confluence": 0.65,
      "stop_distance_ticks": 8,
      "max_holding_time_minutes": 45
    },
    "gamma_pin": {
      "max_daily_signals": 10,
      "min_proximity_ticks": 2,
      "stop_distance_ticks": 6,
      "max_holding_time_minutes": 30
    },
    "confluence_trades": {
      "max_daily_signals": 8,
      "min_confluence_score": 0.70,
      "stop_distance_ticks": 12,
      "max_holding_time_minutes": 60
    }
  },
  
  "automation_risk_controls": {
    "system_monitoring": {
      "max_signal_generation_time_ms": 10,
      "max_execution_time_ms": 100,
      "system_health_check_frequency": 30,
      "auto_disable_on_errors": true
    },
    "position_monitoring": {
      "real_time_pnl_updates": true,
      "stop_loss_slippage_tolerance": 2,
      "position_size_verification": true,
      "auto_close_on_disconnect": true
    },
    "data_quality_checks": {
      "stale_data_threshold_seconds": 5,
      "price_movement_validation": true,
      "volume_validation": true,
      "halt_on_bad_data": true
    }
  },
  
  "broker_specific_risk": {
    "interactive_brokers": {
      "max_orders_per_second": 50,
      "connection_timeout_seconds": 30,
      "reconnection_attempts": 3,
      "api_rate_limits": {
        "market_data_requests": 100,
        "order_requests": 200,
        "account_requests": 50
      }
    },
    "sierra_chart": {
      "max_data_latency_ms": 100,
      "connection_monitoring": true,
      "backup_data_feed": false
    }
  },
  
  "emergency_procedures": {
    "circuit_breakers": {
      "enabled": true,
      "daily_loss_breaker": 500.0,
      "position_size_breaker": 5,
      "error_count_breaker": 5,
      "manual_override_required": true
    },
    "panic_buttons": {
      "close_all_positions": {
        "enabled": true,
        "confirmation_required": false,
        "order_type": "market"
      },
      "disable_automation": {
        "enabled": true,
        "preserve_positions": true,
        "notification_required": true
      }
    },
    "recovery_procedures": {
      "position_reconciliation": true,
      "pnl_verification": true,
      "system_state_backup": true,
      "manual_review_required": true
    }
  },
  
  "risk_reporting": {
    "real_time_metrics": {
      "current_exposure": true,
      "daily_pnl": true,
      "unrealized_pnl": true,
      "risk_utilization": true
    },
    "daily_reports": {
      "risk_summary": true,
      "limit_violations": true,
      "pattern_performance": true,
      "system_health": true
    },
    "alerts": {
      "approaching_limits": {
        "daily_loss_warning": 0.8,
        "position_size_warning": 0.9,
        "drawdown_warning": 0.8
      },
      "limit_breaches": {
        "immediate_notification": true,
        "email_alerts": true,
        "trading_halt": true
      }
    }
  },
  
  "compliance": {
    "regulatory_limits": {
      "pattern_day_trader_rules": true,
      "margin_requirements": true,
      "position_limits": true
    },
    "audit_trail": {
      "all_decisions_logged": true,
      "risk_calculations_logged": true,
      "limit_checks_logged": true,
      "retention_days": 365
    }
  },
  
  "environment_specific": {
    "development": {
      "max_daily_loss": 50.0,
      "max_position_size": 1,
      "all_limits_reduced": 0.1
    },
    "staging": {
      "max_daily_loss": 200.0,
      "max_position_size": 1,
      "all_limits_reduced": 0.5
    },
    "production": {
      "strict_enforcement": true,
      "no_limit_overrides": true,
      "enhanced_monitoring": true
    }
  }
}